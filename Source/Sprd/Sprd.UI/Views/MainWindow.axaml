<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Sprd.UI.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
        xmlns:integration="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:collections="clr-namespace:Avalonia.Collections;assembly=Avalonia.Controls.DataGrid"
        mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="450"
        x:Class="Sprd.UI.Views.MainWindow"
        Icon="/Assets/avalonia-logo.ico"
        Title="Sprd for CARDANO: Every pool mints soon a block!"
        >
  <Design.DataContext>
    <vm:MainWindowViewModel/>
  </Design.DataContext>


  <DockPanel>

    <Menu DockPanel.Dock="Top">
      <MenuItem Header="_File">
        <MenuItem Header="_Logs" Click="OpenLogs_FromMenu" >

          <MenuItem.Icon>
            <Image Source="/Assets/avalonia-logo.ico" />
          </MenuItem.Icon>
        </MenuItem>
        <Separator />
        <MenuItem Header="_Exit" Click="Exit_FromMenu" >
          <MenuItem.Icon>
            <Image Source="/Assets/avalonia-logo.ico" />
          </MenuItem.Icon>
        </MenuItem>
      </MenuItem>
    </Menu>

    <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition  Height="*"/>
      </Grid.RowDefinitions>


      <Grid Grid.Row="1" >
        <Grid IsVisible="{Binding !AllTimeZeroBlocksPools.Count }">
          <TextBlock Text="Fetching Stake Pool Meta Data from servers (about 100mb).. can take a while"></TextBlock>
        </Grid>
        <TabControl IsVisible="{Binding !!AllTimeZeroBlocksPools.Count }" >

          <TabItem>
            <TabItem.Header>
              <StackPanel Orientation="Horizontal">
                <Image Source="/Assets/avalonia-logo.ico" Width="40" Height="40" />
                <TextBlock Text="Pools with 0 blocks" Foreground="Red" />
              </StackPanel>
            </TabItem.Header>
            <TabControl>
              <TabItem>
                <TabItem.Header>
                  <StackPanel Orientation="Horizontal">
                    <Image Source="/Assets/avalonia-logo.ico" Width="40" Height="40" />
                    <TextBlock Text="All time" Foreground="Red" />
                  </StackPanel>
                </TabItem.Header>
                <DataGrid VerticalScrollBarVisibility="Visible" MinHeight="250" MinWidth="250" HorizontalAlignment="Center" VerticalAlignment="Center" Items="{Binding AllTimeZeroBlocksPools}">
                  <DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding Name}"
                                        Header="Pool"/>

                    <DataGridTextColumn Binding="{Binding LifeTimeBlocks}"
                                        Header="Lifetime blocks" />
                    <DataGridTextColumn Binding="{Binding ActiveStakeAda}"
                                        Header="Active Stake"/>
                    <DataGridTextColumn Binding="{Binding ActiveBlockChance}"
                                        Header="Active block chance %"/>
                    <DataGridTextColumn Binding="{Binding SprdStakeADA}"
                                        Header="SPRD Stake"/>
                    <DataGridTextColumn Binding="{Binding SprdStakeBlockChance}"
                                        Header="SPRD block chance %"/>
                    <DataGridTextColumn Binding="{Binding PoolRegistered}"
                                        Header="Running since"/>
                  </DataGrid.Columns>
                </DataGrid>
                  </TabItem>
              <TabItem>
                <TabItem.Header>
                  <StackPanel Orientation="Horizontal">
                    <Image Source="/Assets/avalonia-logo.ico" Width="40" Height="40" />
                    <TextBlock Text="Almost funded" Foreground="Red" />
                  </StackPanel>
                </TabItem.Header>

              </TabItem>
            </TabControl>
          </TabItem>
          <TabItem>
            <TabItem.Header>
              <StackPanel Orientation="Horizontal">
                <Image Source="/Assets/avalonia-logo.ico" Width="40" Height="40" />
                <TextBlock Text="All Pools" Foreground="Red" />
              </StackPanel>
            </TabItem.Header>
          </TabItem>
        </TabControl>
      </Grid>

    </Grid>

  </DockPanel>
</Window>
